# Cloudinary Setup Guide for NeuronFlow Profile Pictures

## Step 1: Get Your Cloudinary API Keys

1. **Sign up for Cloudinary** (if you don't have an account):
   - Go to https://cloudinary.com/
   - Click "Sign up for free"
   - Complete the registration process

2. **Find your API credentials**:
   - Log into your Cloudinary Console
   - Go to Dashboard → API Keys (or Settings → API Keys)
   - You'll find three important values:
     - **Cloud Name** (e.g., `dxyz123abc`)
     - **API Key** (e.g., `123456789012345`)
     - **API Secret** (e.g., `abcDEF123ghiJKL456mnoPQR`)

## Step 2: Add Environment Variables

Copy these lines to your `backend/.env` file and replace with your actual values:

```
# === CLOUDINARY CONFIGURATION ===
CLOUDINARY_CLOUD_NAME=your_cloud_name_here
CLOUDINARY_API_KEY=your_api_key_here
CLOUDINARY_API_SECRET=your_api_secret_here
```

### Example (Replace with your actual credentials):
```
CLOUDINARY_CLOUD_NAME=dxyz123abc
CLOUDINARY_API_KEY=123456789012345
CLOUDINARY_API_SECRET=abcDEF123ghiJKL456mnoPQR
```

## Step 3: Restart Backend Server

After adding the environment variables:
1. Stop your backend server (Ctrl+C)
2. Restart it: `cd backend && npm run dev`
3. You should see "Server running on port 3001" message

## Step 4: Test Profile Picture Upload

1. Go to your profile page in the app
2. Click the camera icon on your profile picture
3. Select an image file (JPEG, PNG, or WebP)
4. The image should upload to Cloudinary and display immediately

## Features Included:

✅ **Automatic Image Optimization**: Cloudinary automatically converts images to WebP format for better performance
✅ **Face Detection**: Images are cropped focusing on faces when resizing
✅ **300x300 Resolution**: All profile pictures are standardized to 300x300 pixels
✅ **5MB File Limit**: Prevents overly large uploads
✅ **Secure URLs**: All images served via HTTPS from Cloudinary's CDN
✅ **Global CDN**: Fast image loading worldwide
✅ **No Page Reload**: Images update instantly in the UI

## Folder Organization:

Your uploaded profile pictures will be organized in Cloudinary as:
- Folder: `neuronflow/profiles/`
- Filename format: `user-{userId}-{timestamp}`

## Troubleshooting:

### "Upload failed" error:
- Check that all three environment variables are correctly set
- Verify your Cloudinary credentials are active
- Check backend console for specific error messages

### Images not displaying:
- Ensure your browser allows images from cloudinary.com
- Check browser network tab for any blocked requests
- Verify the avatar URL in your database points to Cloudinary

### Backend won't start:
- Make sure you installed cloudinary: `cd backend && npm install cloudinary`
- Check that environment variables don't have extra spaces
- Restart the backend server after adding environment variables

## Notes:

- The old local file serving system has been completely replaced
- Profile pictures are now served from Cloudinary's global CDN
- No local storage or static files needed
- Images are automatically optimized for web delivery 